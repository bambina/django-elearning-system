{% extends "./common/base.html" %}
{% block content %}
    <h1>Course Detail</h1>
    <div class="py-3">

        <strong class="d-inline-block mb-2 text-success-emphasis">{{ object.program.title }}</strong>

        <h1>{{ object.title }}</h1>
        <p>{{ object.description }}</p>

        by <a href="{% url 'user-detail' object.teacher.user.username %}">{{ object.teacher.user.get_full_name }}</a>
    </div>

    {% if next_offering and not is_registered and user.is_student %}
    <div class="py-3">
        <form method="post" action="{% url 'course-enroll' course_id=object.id offering_id=next_offering.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary"><span class="h4 font-weight-bold">Enroll Now</span><br>Starts {{ next_offering.term.start_datetime|date:"M j Y" }}</button>
        </form>
    </div>
    {% endif %}

    {% if is_instructor %}
    <a href="{% url 'offering-list' object.id %}">View All Course Offerings</a>
    or
    <a href="{% url 'offering-create' object.id %}">Add New Offering for This Course</a>
    {% endif %}

    {% if is_taking or is_instructor %}
    {% if qa_session %}
    <div class="py-3">
        <a href="{% url 'qa-session' object.id %}" class="btn btn-success">View Live QA Session</a>
    </div>
    {% endif %}
    <div class="py-3">
        <a href="{% url 'material-list' object.id %}">View Materials</a>
    </div>
    {% endif %}

    {% if is_instructor %}
    {% if show_start_session_button %}
    <div class="py-3">
        <form method="post" action="{% url 'start-qa-session' object.id %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-success">Start Live QA Session</button>
        </form>
    </div>
    {% endif %}
    {% if current_offering %}
    <div class="py-3">
        <a href="{% url 'enrolled-student-list' object.id current_offering.id %}">View Currently Enrolled Students</a>
    </div>
    {% endif %}
    <div class="py-3">
        <a href="{% url 'feedback-list' object.id %}">View Feedback</a>
    </div>
    {% endif %}

{% endblock %}
